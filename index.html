<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    /* Define the style for the chat app */
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }

    #container {
      width: 80%;
      max-width: 600px;
      margin: 0 auto;
      background-color: #f0f0f0;
      border: 1px solid #ccc;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    #header {
      padding: 10px;
      background-color: #fff;
      border-bottom: 1px solid #ccc;
    }

    #header h1 {
      margin: 0;
      font-size: 24px;
      color: #333;
    }

    #messages {
      height: 400px;
      overflow-y: scroll;
      padding: 10px;
    }

    .message {
      margin: 10px 0;
      padding: 10px;
      background-color: #fff;
      border-radius: 10px;
    }

    #footer {
      padding: 10px;
      background-color: #fff;
      border-top: 1px solid #ccc;
      display: flex;
      align-items: center;
    }

    #input {
      flex: 1;
      margin-right: 10px;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 10px;
      outline: none;
    }

    #send {
      padding: 10px 20px;
      background-color: #333;
      color: #fff;
      border: none;
      border-radius: 10px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div id="container">
    <div id="header">
      <h1>Simple Chat App</h1>
    </div>
    <div id="messages">
      <!-- The messages will be displayed here -->
    </div>
    <div id="footer">
      <input id="input" type="text" placeholder="Type your message here...">
      <button id="send">Send</button>
    </div>
  </div>
  <script>
    // Paste your JS code here
    // Get the username from local storage or prompt the user
let username = localStorage.getItem("username") || prompt("Enter your name:");

// Save the username in local storage
localStorage.setItem("username", username);

// Get the messages element
let messages = document.getElementById("messages");

// Define a function to send a message
function sendMessage() {
  // Get the input element and its value
  let input = document.getElementById("input");
  let message = input.value;

  // Check if the message is not empty
  if (message) {
    // Create a new XMLHttpRequest object
    let xhr = new XMLHttpRequest();

    // Set the request method and URL
    xhr.open("POST", "messages.json");

    // Set the request header for JSON content type
    xhr.setRequestHeader("Content-Type", "application/json");

    // Define a callback function for the request
    xhr.onload = function () {
      // Check if the request was successful
      if (xhr.status == 200) {
        // Clear the input value
        input.value = "";

        // Update the messages element
        updateMessages();
      } else {
        // Display an error message
        alert("Something went wrong. Please try again.");
      }
    };

    // Send the request with the message data
    xhr.send(JSON.stringify({ username: username, message: message }));
  }
}

// Define a function to update the messages element
function updateMessages() {
  // Create a new XMLHttpRequest object
  let xhr = new XMLHttpRequest();

  // Set the request method and URL
  xhr.open("GET", "messages.json");

  // Define a callback function for the request
  xhr.onload = function () {
    // Check if the request was successful
    if (xhr.status == 200) {
      // Parse the response as JSON
      let data = JSON.parse(xhr.responseText);

      // Clear the messages element
      messages.innerHTML = "";

      // Loop through the data array
      for (let item of data) {
        // Create a new message element
        let message = document.createElement("div");

        // Set the message class and text
        message.className = "message";
        message.textContent = item.username + ": " + item.message;

        // Append the message element to the messages element
        messages.appendChild(message);
      }
    } else {
      // Display an error message
      alert("Something went wrong. Please try again.");
    }
  };

  // Send the request
  xhr.send();
}

// Call the updateMessages function initially
updateMessages();

// Add a click event listener to the send button
document.getElementById("send").addEventListener("click", sendMessage);

  </script>
</body>
</html>
